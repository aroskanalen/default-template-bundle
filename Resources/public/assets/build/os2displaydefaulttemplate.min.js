/**
 * @name Os2DisplayDefaultTemplateBundle
 * @version v1.0.0
 * @link https://github.com/itk-os2display/default-template-bundle
 */
angular.module("toolsModule").directive("backgroundEditor",["mediaFactory",function(o){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(l){l.step="background-picker",l.backgroundPicker=function(){l.step="background-picker"},l.pickFromMedia=function(){l.step="pick-from-media"},l.pickFromComputer=function(){l.step="pick-from-computer"},l.clickBackgroundColor=function(){l.slide.options.images=[]};l.$on("mediaOverview.selectMedia",function(e,t){!function(e){for(var t=[],o=!1,i=0;i<l.slide.media.length;i++){l.slide.media[i].id===e.id&&(o=!0)}o||t.push(e),l.slide.media=t}(t)}),l.$on("mediaUpload.uploadSuccess",function(e,t){o.getMedia(t.id).then(function(e){l.slide.media=[e]},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})}),t.queue.find(function(e,t){return!e.isSuccess})||l.close()})},templateUrl:function(e,t){return t.template?t.template:"/bundles/os2displaydefaulttemplate/apps/toolsModule/background-editor.html"}}}]),angular.module("toolsModule").directive("baseEditor",[function(){return{restrict:"E",replace:!0,scope:{slide:"=",template:"@",close:"&"},templateUrl:function(e,t){return t.template}}}]),angular.module("toolsModule").directive("headerEditorResponsive",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/header-editor-responsive.html"}}),angular.module("toolsModule").directive("logoEditor",["mediaFactory",function(i){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&",template:"@"},link:function(o){o.logoStep="logo-picker",o.logoPicker=function(){o.logoStep="logo-picker"},o.pickLogoFromMedia=function(){o.logoStep="pick-logo-from-media",o.$emit("mediaOverview.updateSearch")},o.pickLogoFromComputer=function(){o.logoStep="pick-logo-from-computer"},o.logoPositions=[{value:{top:"0",bottom:"auto",left:"0",right:"auto"},text:"top venstre"},{value:{top:"0",bottom:"auto",left:"auto",right:"0"},text:"top højre"},{value:{top:"auto",bottom:"0",left:"0",right:"auto"},text:"bund venstre"},{value:{top:"auto",bottom:"0",left:"auto",right:"0"},text:"bund højre"}],o.logoSizes=[{value:"5%",text:"Meget lille (5% af skærmen)"},{value:"10%",text:"Lille (10% af skærmen)"},{value:"15%",text:"Medium (15% af skærmen)"},{value:"20%",text:"Stor (20% af skærmen)"},{value:"40%",text:"Ekstra stor (40% af skærmen)"}],o.$on("mediaOverview.selectMedia",function(e,t){"logo"===t.media_type&&(o.slide.logo=t,o.logoStep="logo-picker")}),o.$on("mediaUpload.uploadSuccess",function(e,t){i.getMedia(t.id).then(function(e){"logo"===e.media_type&&(o.slide.logo=e,o.logoStep="logo-picker")},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})})})},templateUrl:function(e,t){return t.template?t.template:"/bundles/os2displaydefaulttemplate/apps/toolsModule/logo-editor.html"}}}]),angular.module("toolsModule").directive("manualCalendarEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(t){function e(){t.newEvent={title:null,place:null,from:null,to:null}}e(),t.newEventItem=function(){t.slide.options.eventitems.push(angular.copy(t.newEvent)),e()},t.removeEventItem=function(e){t.slide.options.eventitems.splice(t.slide.options.eventitems.indexOf(e),1)},t.sortEvents=function(){0<t.slide.options.eventitems.length&&(t.slide.options.eventitems=$filter("orderBy")(t.slide.options.eventitems,"from"))},t.eventIsOutdated=function(e){var t=e.to,o=e.from,i=Date.now()/1e3;return t&&t<i||!t&&o<i},t.sortEvents()},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/manual-calendar-editor.html"}}),angular.module("toolsModule").directive("rssEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/rss-editor.html"}}),angular.module("toolsModule").directive("slideshowEditor",["mediaFactory",function(o){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(n){n.step="background-picker",n.backgroundPicker=function(){n.step="background-picker"},n.pickFromMedia=function(){n.step="pick-from-media"},n.pickFromComputer=function(){n.step="pick-from-computer"},n.clickBackgroundColor=function(){n.slide.options.images=[]};n.$on("mediaOverview.selectMedia",function(e,t){!function(e){for(var t=[],o=!1,i=0;i<n.slide.media.length;i++){var l=n.slide.media[i];l.id!==e.id?t.push(l):o=!0}o||t.push(e),n.slide.media=t}(t)}),n.$on("mediaUpload.uploadSuccess",function(e,t){o.getMedia(t.id).then(function(e){n.slide.media.push(e)},function(e){busService.$emit("log.error",{cause:e,msg:"Kunne ikke tilføje media."})}),t.queue.find(function(e,t){return!e.isSuccess})||n.close()})},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/slideshow-editor.html"}}]),angular.module("toolsModule").directive("slideshowEffectsEditor",[function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/slideshow-effects-editor.html"}}]),angular.module("toolsModule").directive("slideshowOrderEditor",[function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},link:function(i){function t(e,t,o){var i=e[t];e[t]=e[o],e[o]=i}i.pushMediaRight=function(e){e===i.slide.media.length-1?t(i.slide.media,e,0):t(i.slide.media,e,e+1)},i.pushMediaLeft=function(e){t(i.slide.media,e,0===e?i.slide.media.length-1:e-1)},i.removeMedia=function(e){i.slide.media.splice(e,1)},i.handleDropMedia=function(e,t){e=parseInt(e.split("index-")[1]),t=parseInt(t.split("index-")[1]);var o=i.slide.media.splice(e,1);i.slide.media.splice(t,0,o[0])}},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/slideshow-order-editor.html"}}]),angular.module("toolsModule").directive("sourceEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/source-editor.html"}}),angular.module("toolsModule").directive("textEditor",function(){return{restrict:"E",replace:!0,scope:{slide:"=",close:"&"},templateUrl:"/bundles/os2displaydefaulttemplate/apps/toolsModule/text-editor.html"}});